## ADDED Requirements

### Requirement: 轮询刷新机制
系统 MUST 提供自动轮询刷新功能，确保多用户协作时数据同步。

#### Scenario: 自动刷新看板数据
- **WHEN** 用户在看板视图页面
- **THEN** 系统每5-10秒自动刷新当前项目的列和任务数据
- **AND** 页面显示最新数据

#### Scenario: 页面不可见时暂停轮询
- **WHEN** 用户切换到其他标签页或最小化窗口
- **THEN** 系统暂停轮询刷新
- **AND** 用户返回页面时恢复轮询

#### Scenario: 刷新不影响用户操作
- **WHEN** 用户正在编辑任务或拖拽卡片
- **THEN** 刷新操作不会中断用户当前操作
- **AND** 用户操作完成后显示最新数据

### Requirement: 任务评论
系统 MUST 提供任务评论功能，支持团队成员在任务上进行讨论。

#### Scenario: 添加评论成功
- **WHEN** 用户在任务详情中输入评论内容并提交
- **THEN** 系统保存评论
- **AND** 评论列表显示新评论（包含评论者、时间、内容）

#### Scenario: 评论内容为空
- **WHEN** 用户提交空的评论内容
- **THEN** 系统返回错误信息"评论内容不能为空"

#### Scenario: 查看任务评论列表
- **WHEN** 用户打开任务详情弹窗
- **THEN** 系统显示该任务的所有评论
- **AND** 评论按时间倒序排列（最新在前）

#### Scenario: 删除自己的评论
- **WHEN** 用户删除自己发表的评论
- **THEN** 系统删除该评论
- **AND** 评论列表更新

#### Scenario: 无法删除他人评论
- **WHEN** 用户尝试删除他人发表的评论
- **THEN** 系统返回403禁止访问错误

#### Scenario: 任务删除时级联删除评论
- **WHEN** 任务被删除
- **THEN** 该任务的所有评论同时被删除

### Requirement: 任务搜索筛选
系统 MUST 提供任务搜索和筛选功能，帮助用户快速定位任务。

#### Scenario: 按标题关键词搜索
- **WHEN** 用户输入关键词进行搜索
- **THEN** 系统显示标题包含该关键词的任务
- **AND** 搜索不区分大小写

#### Scenario: 按负责人筛选
- **WHEN** 用户选择负责人进行筛选
- **THEN** 系统只显示指派给该负责人的任务

#### Scenario: 按优先级筛选
- **WHEN** 用户选择优先级（高/中/低）进行筛选
- **THEN** 系统只显示对应优先级的任务

#### Scenario: 按截止日期范围筛选
- **WHEN** 用户设置截止日期范围进行筛选
- **THEN** 系统只显示截止日期在该范围内的任务

#### Scenario: 组合筛选条件
- **WHEN** 用户同时设置多个筛选条件
- **THEN** 系统显示同时满足所有条件的任务

#### Scenario: 清除筛选条件
- **WHEN** 用户点击清除筛选按钮
- **THEN** 系统清除所有筛选条件
- **AND** 显示所有任务

#### Scenario: 筛选结果为空
- **WHEN** 没有任务满足筛选条件
- **THEN** 系统显示"暂无符合条件的任务"提示
