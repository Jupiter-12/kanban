# 轮询刷新、任务评论与搜索筛选

## 变更描述

为看板系统添加三个核心功能，提升团队协作效率：

1. **轮询刷新机制** - 实现5-10秒自动刷新，确保多用户协作时数据同步
2. **任务评论功能** - 支持在任务上添加评论，增强团队沟通
3. **任务搜索/筛选** - 支持按标题、负责人、优先级等条件筛选任务

## 功能详情

### A. 轮询刷新机制

| 项目 | 说明 |
|------|------|
| 刷新间隔 | 5-10秒（可配置） |
| 刷新范围 | 当前看板视图的列和任务 |
| 触发条件 | 页面可见时自动刷新 |
| 优化策略 | 页面不可见时暂停轮询 |

### B. 任务评论功能

| 项目 | 说明 |
|------|------|
| 评论位置 | 任务详情弹窗内 |
| 评论内容 | 纯文本，支持多行 |
| 评论操作 | 添加、删除（仅自己的评论） |
| 显示信息 | 评论者、评论时间、评论内容 |

### C. 任务搜索/筛选

| 项目 | 说明 |
|------|------|
| 搜索位置 | 看板视图顶部 |
| 筛选条件 | 标题关键词、负责人、优先级、截止日期范围 |
| 筛选效果 | 实时过滤显示符合条件的任务 |
| 重置功能 | 一键清除所有筛选条件 |

## 影响范围

- **后端**：
  - 新增评论模型和API端点
  - 新增任务搜索/筛选API参数
- **前端**：
  - 看板视图添加轮询逻辑
  - 任务详情弹窗添加评论区
  - 看板视图添加搜索筛选栏
- **数据库**：
  - 新增 comments 表

## 相关规格

- [kanban-core/spec.md](specs/kanban-core/spec.md) - 核心功能规格
